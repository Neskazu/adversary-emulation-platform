–í–æ—Ç –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç README.
–Ø –∑–∞–º–µ–Ω–∏–ª ¬´–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å¬ª –Ω–∞ –±–æ–ª–µ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–ª –±–ª–æ–∫ —Å SSH-–∫–ª—é—á–∞–º–∏ ‚Äî —á—Ç–æ —ç—Ç–æ –∑–∞ –∫–ª—é—á, –æ—Ç–∫—É–¥–∞ –æ–Ω –±–µ—Ä—ë—Ç—Å—è –∏ –∑–∞—á–µ–º –Ω—É–∂–µ–Ω.

---

# Adversary Emulation Platform üõ°Ô∏è

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –¥–ª—è —ç–º—É–ª—è—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤ (Adversary Emulation), —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∫–∏–±–µ—Ä—É—á–µ–Ω–∏–π.

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–µ–Ω–¥ —Å –ø–æ–º–æ—â—å—é **Vagrant**, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±–∞–∑–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É —á–µ—Ä–µ–∑ **Ansible** –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∞—Ç–∞–∫ –∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏.

---

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

* **Vagrant**
* **VirtualBox**
* **Ansible** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –∏–∑ WSL –∏–ª–∏ Linux)

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–≥–æ —Å—Ç–µ–Ω–¥–∞.

---

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH-–¥–æ—Å—Ç—É–ø–∞ üîë

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω Vagrant –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SSH-–∫–ª—é—á –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –Ω–∏–º.
–í –¥–∞–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è Vagrant –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –í–ú.

#### –ß—Ç–æ —ç—Ç–æ –∑–∞ –∫–ª—é—á?

Vagrant –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–π *insecure private key* –¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –º–∞—à–∏–Ω–∞–º.
–í –≤–∞—à–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ —ç—Ç–æ—Ç –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

```
/mnt/s/vagrant_home/insecure_private_keys/vagrant.key.rsa
```

* `/mnt/s/` ‚Äî –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–∏—Å–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ WSL)
* `vagrant_home` ‚Äî –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å —Ñ–∞–π–ª–∞–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è Vagrant
* `insecure_private_keys` ‚Äî –∫–∞—Ç–∞–ª–æ–≥ —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏
* `vagrant.key.rsa` ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω—ã–π SSH-–∫–ª—é—á

–ï—Å–ª–∏ –ø—É—Ç—å –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è ‚Äî —É—Ç–æ—á–Ω–∏—Ç–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–ª—é—á–∞ –≤ –≤–∞—à–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

#### –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ SSH-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ

–°–æ–∑–¥–∞–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –∫–ª—é—á–µ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:

```bash
mkdir -p ~/.ssh/lab_keys
cp /mnt/s/vagrant_home/insecure_private_keys/vagrant.key.rsa ~/.ssh/lab_keys/id_rsa
chmod 600 ~/.ssh/lab_keys/id_rsa
```

* `mkdir -p` ‚Äî —Å–æ–∑–¥–∞—ë—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (–µ—Å–ª–∏ –µ—ë –Ω–µ—Ç)
* `cp` ‚Äî –∫–æ–ø–∏—Ä—É–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
* `chmod 600` ‚Äî –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∫–ª—é—á—É (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ SSH)

> ‚ö†Ô∏è –í–∞–∂–Ω–æ: –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞.

---

### 2. –ó–∞–ø—É—Å–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω üì¶

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
vagrant up
```

–ö–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `Vagrantfile`.

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π:

```bash
vagrant status
```

---

### 3. –û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (Provisioning) ‚öôÔ∏è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –í–ú –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Ansible.

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∏–∂–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `ansible`.

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:

```bash
cd ansible
```

–ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–ª–µ–π–±—É–∫–∞:

```bash
ansible-playbook -i inventory.ini site.yml
```

–≠—Ç–æ—Ç –ø–ª–µ–π–±—É–∫:

* –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±–∞–∑–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ö–æ—Å—Ç–æ–≤
* —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
* –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫ –∑–∞–ø—É—Å–∫—É —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

---

## ‚öîÔ∏è –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏ –∞—Ç–∞–∫–∏

–ü–æ—Å–ª–µ –±–∞–∑–æ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —ç–º—É–ª—è—Ü–∏–∏ –∞—Ç–∞–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

---

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è (Detections) üîç

–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –¥–µ—Ç–µ–∫—Ü–∏–∏ –Ω–∞ SIEM-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

```bash
ANSIBLE_ROLES_PATH=./roles ansible-playbook -i inventory.ini playbooks/deploy-detections.yml --limit siems
```

–ü–ª–µ–π–±—É–∫:

* –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–∞
* –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏—Ö –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —É–∑–ª–∞–º
* –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è

---

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤ Caldera üïµÔ∏è‚Äç‚ôÇÔ∏è

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤ Caldera –∫ C2-—Å–µ—Ä–≤–µ—Ä—É:

```bash
ANSIBLE_ROLES_PATH=./roles ansible-playbook -i inventory.ini playbooks/deploy-caldera-agents.yml
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–≥–µ–Ω—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Caldera –∏ –≥–æ—Ç–æ–≤—ã –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

---

